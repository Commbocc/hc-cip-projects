import{a3 as ui,aB as yi}from"./vendor.b8b0b9ef.js";import{S as ci,o as fi}from"./definitions.fec13401.js";class xs{constructor(e=0,n=0,h=0,l=0){this.x=e,this.y=n,this.width=h,this.height=l}get isEmpty(){return this.width<=0||this.height<=0}union(e){this.x=Math.min(this.x,e.x),this.y=Math.min(this.y,e.y),this.width=Math.max(this.width,e.width),this.height=Math.max(this.height,e.height)}}class j{constructor(e,n){this.x=e,this.y=n}clone(){return new j(this.x,this.y)}equals(e,n){return e===this.x&&n===this.y}isEqual(e){return e.x===this.x&&e.y===this.y}setCoords(e,n){this.x=e,this.y=n}normalize(){const e=this.x,n=this.y,h=Math.sqrt(e*e+n*n);this.x/=h,this.y/=h}rightPerpendicular(){const e=this.x;this.x=this.y,this.y=-e}move(e,n){this.x+=e,this.y+=n}assign(e){this.x=e.x,this.y=e.y}assignAdd(e,n){this.x=e.x+n.x,this.y=e.y+n.y}assignSub(e,n){this.x=e.x-n.x,this.y=e.y-n.y}rotate(e,n){const h=this.x,l=this.y;this.x=h*e-l*n,this.y=h*n+l*e}scale(e){this.x*=e,this.y*=e}length(){const e=this.x,n=this.y;return Math.sqrt(e*e+n*n)}static distance(e,n){const h=n.x-e.x,l=n.y-e.y;return Math.sqrt(h*h+l*l)}static add(e,n){return new j(e.x+n.x,e.y+n.y)}static sub(e,n){return new j(e.x-n.x,e.y-n.y)}}const mi=128e3;let zt=null,ei=null;async function us(){return zt||(zt=gi()),zt}async function gi(){ei=await(ui("esri-csp-restrictions")?await import("./libtess-asm.2ffdb046.js").then(e=>e.l):await import("./libtess.666bc0df.js").then(e=>e.l)).load({locateFile:()=>yi("esri/core/libs/libtess/libtess.wasm")})}function ys(a,e){const n=Math.max(a.length,mi);return ei.triangulate(a,e,n)}function ni(a,e){return a.x===e.x&&a.y===e.y}function pi(a){if(!a)return;const e=a.length;if(e<=1)return;let n=0;for(let h=1;h<e;h++)ni(a[h],a[n])||++n===h||(a[n]=a[h]);a.length=n+1}function J(a,e){return a.x=e.y,a.y=-e.x,a}function Y(a,e){return a.x=-e.y,a.y=e.x,a}function Ht(a,e){return a.x=e.x,a.y=e.y,a}function Wt(a,e){return a.x=-e.x,a.y=-e.y,a}function Xt(a){return Math.sqrt(a.x*a.x+a.y*a.y)}function di(a,e){return a.x*e.y-a.y*e.x}function Zt(a,e){return a.x*e.x+a.y*e.y}function pt(a,e,n,h){return a.x=e.x*n+e.y*h,a.y=e.x*h-e.y*n,a}class cs{constructor(e,n,h){this.writeVertex=e,this.writeTriangle=n,this.canUseThinTessellation=h,this.prevNormal={x:void 0,y:void 0},this.nextNormal={x:void 0,y:void 0},this.textureNormalLeft={x:0,y:1},this.textureNormalRight={x:0,y:-1},this.textureNormal={x:void 0,y:void 0},this.joinNormal={x:void 0,y:void 0},this.inner={x:void 0,y:void 0},this.outer={x:void 0,y:void 0},this.roundStart={x:void 0,y:void 0},this.roundEnd={x:void 0,y:void 0},this.startBreak={x:void 0,y:void 0},this.endBreak={x:void 0,y:void 0},this.innerPrev={x:void 0,y:void 0},this.innerNext={x:void 0,y:void 0},this.bevelStart={x:void 0,y:void 0},this.bevelEnd={x:void 0,y:void 0},this.bevelMiddle={x:void 0,y:void 0}}tessellate(e,n){pi(e),this.canUseThinTessellation&&n.halfWidth<ci&&!n.offset?this.tessellateThin_(e,n):this.tessellate_(e,n)}tessellateThin_(e,n){if(e.length<2)return;const h=n.wrapDistance||65535;let l=n.initialDistance||0,o=!1,u=e[0].x,f=e[0].y;const c=e.length;for(let g=1;g<c;++g){o&&(o=!1,l=0);let L=e[g].x,B=e[g].y,v=L-u,A=B-f,p=Math.sqrt(v*v+A*A);if(v/=p,A/=p,l+p>h){o=!0;const y=(h-l)/p;p=h-l,L=(1-y)*u+y*L,B=(1-y)*f+y*B,--g}const T=this.writeVertex(u,f,0,0,v,A,A,-v,0,-1,l),b=this.writeVertex(u,f,0,0,v,A,-A,v,0,1,l);l+=p;const R=this.writeVertex(L,B,0,0,v,A,A,-v,0,-1,l),m=this.writeVertex(L,B,0,0,v,A,-A,v,0,1,l);this.writeTriangle(T,b,R),this.writeTriangle(b,R,m),u=L,f=B}}tessellate_(e,n){const h=e[0],l=e[e.length-1],o=ni(h,l),u=o?3:2;if(e.length<u)return;const f=n.pixelCoordRatio,c=n.capType!=null?n.capType:0,g=n.joinType!=null?n.joinType:2,L=n.miterLimit!=null?Math.min(n.miterLimit,4):2,B=n.roundLimit!=null?Math.min(n.roundLimit,1.05):1.05,v=n.halfWidth!=null?n.halfWidth:2,A=!!n.textured;let p,T,b=null,R=null;const m=this.prevNormal,y=this.nextNormal;let ct=-1,at=-1;const F=this.joinNormal;let $,E;const bt=this.textureNormalLeft,Rt=this.textureNormalRight,C=this.textureNormal;let P=-1,N=-1;const jt=n.wrapDistance||65535;let V=n.initialDistance||0;const oi=this.writeVertex,xi=this.writeTriangle,k=function(G,Bt,ut,q,Q,st){const et=oi(p,T,$,E,ut,q,G,Bt,Q,st,V);return P>=0&&N>=0&&et>=0&&xi(P,N,et),P=N,N=et,et};o&&(b=e[e.length-2],y.x=l.x-b.x,y.y=l.y-b.y,at=Xt(y),y.x/=at,y.y/=at);let ft=!1;for(let G=0;G<e.length;++G){if(ft&&(ft=!1,V=0),b&&(m.x=-y.x,m.y=-y.y,ct=at,V+ct>jt&&(ft=!0)),ft){const U=(jt-V)/ct;ct=jt-V,b={x:(1-U)*b.x+U*e[G].x,y:(1-U)*b.y+U*e[G].y},--G}else b=e[G];p=b.x,T=b.y;const Bt=G<=0&&!ft,ut=G===e.length-1;if(Bt||(V+=ct),R=ut?o?e[1]:null:e[G+1],R?(y.x=R.x-p,y.y=R.y-T,at=Xt(y),y.x/=at,y.y/=at):(y.x=void 0,y.y=void 0),!o){if(Bt){Y(F,y),$=F.x,E=F.y,c===2&&(k(-y.y-y.x,y.x-y.y,y.x,y.y,0,-1),k(y.y-y.x,-y.x-y.y,y.x,y.y,0,1)),c===1&&(k(-y.y-y.x,y.x-y.y,y.x,y.y,-1,-1),k(y.y-y.x,-y.x-y.y,y.x,y.y,-1,1)),c!==1&&c!==0||(k(-y.y,y.x,y.x,y.y,0,-1),k(y.y,-y.x,y.x,y.y,0,1));continue}if(ut){J(F,m),$=F.x,E=F.y,c!==1&&c!==0||(k(m.y,-m.x,-m.x,-m.y,0,-1),k(-m.y,m.x,-m.x,-m.y,0,1)),c===2&&(k(m.y-m.x,-m.x-m.y,-m.x,-m.y,0,-1),k(-m.y-m.x,m.x-m.y,-m.x,-m.y,0,1)),c===1&&(k(m.y-m.x,-m.x-m.y,-m.x,-m.y,1,-1),k(-m.y-m.x,m.x-m.y,-m.x,-m.y,1,1));continue}}let q,Q,st=-di(m,y);if(Math.abs(st)<.01)Zt(m,y)>0?(F.x=m.x,F.y=m.y,st=1,q=Number.MAX_VALUE,Q=!0):(Y(F,y),st=1,q=1,Q=!1);else{F.x=(m.x+y.x)/st,F.y=(m.y+y.y)/st,q=Xt(F);const U=(q-1)*v*f;Q=q>4||U>ct&&U>at}$=F.x,E=F.y;let et=g;switch(g){case 0:q<1.05&&(et=2);break;case 1:q<B&&(et=2);break;case 2:q>L&&(et=0)}switch(et){case 2:if(k(F.x,F.y,-m.x,-m.y,0,-1),k(-F.x,-F.y,-m.x,-m.y,0,1),ut)break;if(A){const U=ft?0:V;P=this.writeVertex(p,T,$,E,y.x,y.y,F.x,F.y,0,-1,U),N=this.writeVertex(p,T,$,E,y.x,y.y,-F.x,-F.y,0,1,U)}break;case 0:{const U=st<0;let I,O,lt,H;if(U){const M=P;P=N,N=M,I=bt,O=Rt}else I=Rt,O=bt;if(Q)lt=U?Y(this.innerPrev,m):J(this.innerPrev,m),H=U?J(this.innerNext,y):Y(this.innerNext,y);else{const M=U?Wt(this.inner,F):Ht(this.inner,F);lt=M,H=M}const Z=U?J(this.bevelStart,m):Y(this.bevelStart,m);k(lt.x,lt.y,-m.x,-m.y,I.x,I.y);const Ut=k(Z.x,Z.y,-m.x,-m.y,O.x,O.y);if(ut)break;const nt=U?Y(this.bevelEnd,y):J(this.bevelEnd,y);if(Q){const M=this.writeVertex(p,T,$,E,-m.x,-m.y,0,0,0,0,V);P=this.writeVertex(p,T,$,E,y.x,y.y,H.x,H.y,I.x,I.y,V),N=this.writeVertex(p,T,$,E,y.x,y.y,nt.x,nt.y,O.x,O.y,V),this.writeTriangle(Ut,M,N)}else{if(A){const M=this.bevelMiddle;M.x=(Z.x+nt.x)/2,M.y=(Z.y+nt.y)/2,pt(C,M,-m.x,-m.y),k(M.x,M.y,-m.x,-m.y,C.x,C.y),pt(C,M,y.x,y.y),P=this.writeVertex(p,T,$,E,y.x,y.y,M.x,M.y,C.x,C.y,V),N=this.writeVertex(p,T,$,E,y.x,y.y,H.x,H.y,I.x,I.y,V)}else{const M=P;P=N,N=M}k(nt.x,nt.y,y.x,y.y,O.x,O.y)}if(U){const M=P;P=N,N=M}break}case 1:{const U=st<0;let I,O;if(U){const W=P;P=N,N=W,I=bt,O=Rt}else I=Rt,O=bt;const lt=U?Wt(this.inner,F):Ht(this.inner,F);let H,Z;Q?(H=U?Y(this.innerPrev,m):J(this.innerPrev,m),Z=U?J(this.innerNext,y):Y(this.innerNext,y)):(H=lt,Z=lt);const Ut=U?J(this.roundStart,m):Y(this.roundStart,m),nt=U?Y(this.roundEnd,y):J(this.roundEnd,y),M=k(H.x,H.y,-m.x,-m.y,I.x,I.y),Ft=k(Ut.x,Ut.y,-m.x,-m.y,O.x,O.y);if(ut)break;const ot=this.writeVertex(p,T,$,E,-m.x,-m.y,0,0,0,0,V);Q||this.writeTriangle(P,N,ot);const ht=Wt(this.outer,lt),yt=this.writeVertex(p,T,$,E,y.x,y.y,nt.x,nt.y,O.x,O.y,V);let mt,gt;const St=q>2;if(St){let W;q!==Number.MAX_VALUE?(ht.x/=q,ht.y/=q,W=Zt(m,ht),W=(q*(W*W-1)+1)/W):W=-1,mt=U?J(this.startBreak,m):Y(this.startBreak,m),mt.x+=m.x*W,mt.y+=m.y*W,gt=U?Y(this.endBreak,y):J(this.endBreak,y),gt.x+=y.x*W,gt.y+=y.y*W}pt(C,ht,-m.x,-m.y);const Nt=this.writeVertex(p,T,$,E,-m.x,-m.y,ht.x,ht.y,C.x,C.y,V);pt(C,ht,y.x,y.y);const qt=A?this.writeVertex(p,T,$,E,y.x,y.y,ht.x,ht.y,C.x,C.y,V):Nt,Ot=ot,Vt=A?this.writeVertex(p,T,$,E,y.x,y.y,0,0,0,0,V):ot;let _t=-1,wt=-1;if(St&&(pt(C,mt,-m.x,-m.y),_t=this.writeVertex(p,T,$,E,-m.x,-m.y,mt.x,mt.y,C.x,C.y,V),pt(C,gt,y.x,y.y),wt=this.writeVertex(p,T,$,E,y.x,y.y,gt.x,gt.y,C.x,C.y,V)),A?St?(this.writeTriangle(Ot,Ft,_t),this.writeTriangle(Ot,_t,Nt),this.writeTriangle(Vt,qt,wt),this.writeTriangle(Vt,wt,yt)):(this.writeTriangle(Ot,Ft,Nt),this.writeTriangle(Vt,qt,yt)):St?(this.writeTriangle(ot,Ft,_t),this.writeTriangle(ot,_t,wt),this.writeTriangle(ot,wt,yt)):(this.writeTriangle(ot,Ft,Nt),this.writeTriangle(ot,qt,yt)),Q?(P=this.writeVertex(p,T,$,E,y.x,y.y,Z.x,Z.y,I.x,I.y,V),N=yt):(P=A?this.writeVertex(p,T,$,E,y.x,y.y,Z.x,Z.y,I.x,I.y,V):M,this.writeTriangle(P,Vt,yt),N=yt),U){const W=P;P=N,N=W}break}}}}}const Mt=[["(",")"],[")","("],["<",">"],[">","<"],["[","]"],["]","["],["{","}"],["}","{"],["\xAB","\xBB"],["\xBB","\xAB"],["\u2039","\u203A"],["\u203A","\u2039"],["\u207D","\u207E"],["\u207E","\u207D"],["\u208D","\u208E"],["\u208E","\u208D"],["\u2264","\u2265"],["\u2265","\u2264"],["\u2329","\u232A"],["\u232A","\u2329"],["\uFE59","\uFE5A"],["\uFE5A","\uFE59"],["\uFE5B","\uFE5C"],["\uFE5C","\uFE5B"],["\uFE5D","\uFE5E"],["\uFE5E","\uFE5D"],["\uFE64","\uFE65"],["\uFE65","\uFE64"]],Tt=["\u0622","\u0623","\u0625","\u0627"],Ti=["\uFEF5","\uFEF7","\uFEF9","\uFEFB"],_i=["\uFEF6","\uFEF8","\uFEFA","\uFEFC"],kt=["\u0627","\u0628","\u062A","\u062B","\u062C","\u062D","\u062E","\u062F","\u0630","\u0631","\u0632","\u0633","\u0634","\u0635","\u0636","\u0637","\u0638","\u0639","\u063A","\u0641","\u0642","\u0643","\u0644","\u0645","\u0646","\u0647","\u0648","\u064A","\u0625","\u0623","\u0622","\u0629","\u0649","\u0644","\u0645","\u0646","\u0647","\u0648","\u064A","\u0625","\u0623","\u0622","\u0629","\u0649","\u06CC","\u0626","\u0624"],wi=["\uFE8D","\uFE8F","\uFE95","\uFE99","\uFE9D","\uFEA1","\uFEA5","\uFEA9","\uFEAB","\uFEAD","\uFEAF","\uFEB1","\uFEB5","\uFEB9","\uFEBD","\uFEC1","\uFEC5","\uFEC9","\uFECD","\uFED1","\uFED5","\uFED9","\uFEDD","\uFEE1","\uFEE5","\uFEE9","\uFEED","\uFEF1","\uFE87","\uFE83","\uFE81","\uFE93","\uFEEF","\uFBFC","\uFE89","\uFE85","\uFE70","\uFE72","\uFE74","\uFE76","\uFE78","\uFE7A","\uFE7C","\uFE7E","\uFE80","\uFE89","\uFE85"],vi=["\uFE8E","\uFE90","\uFE96","\uFE9A","\uFE9E","\uFEA2","\uFEA6","\uFEAA","\uFEAC","\uFEAE","\uFEB0","\uFEB2","\uFEB6","\uFEBA","\uFEBE","\uFEC2","\uFEC6","\uFECA","\uFECE","\uFED2","\uFED6","\uFEDA","\uFEDE","\uFEE2","\uFEE6","\uFEEA","\uFEEE","\uFEF2","\uFE88","\uFE84","\uFE82","\uFE94","\uFEF0","\uFBFD","\uFE8A","\uFE86","\uFE70","\uFE72","\uFE74","\uFE76","\uFE78","\uFE7A","\uFE7C","\uFE7E","\uFE80","\uFE8A","\uFE86"],Ai=["\uFE8E","\uFE92","\uFE98","\uFE9C","\uFEA0","\uFEA4","\uFEA8","\uFEAA","\uFEAC","\uFEAE","\uFEB0","\uFEB4","\uFEB8","\uFEBC","\uFEC0","\uFEC4","\uFEC8","\uFECC","\uFED0","\uFED4","\uFED8","\uFEDC","\uFEE0","\uFEE4","\uFEE8","\uFEEC","\uFEEE","\uFEF4","\uFE88","\uFE84","\uFE82","\uFE94","\uFEF0","\uFBFF","\uFE8C","\uFE86","\uFE71","\uFE72","\uFE74","\uFE77","\uFE79","\uFE7B","\uFE7D","\uFE7F","\uFE80","\uFE8C","\uFE86"],Li=["\uFE8D","\uFE91","\uFE97","\uFE9B","\uFE9F","\uFEA3","\uFEA7","\uFEA9","\uFEAB","\uFEAD","\uFEAF","\uFEB3","\uFEB7","\uFEBB","\uFEBF","\uFEC3","\uFEC7","\uFECB","\uFECF","\uFED3","\uFED7","\uFEDB","\uFEDF","\uFEE3","\uFEE7","\uFEEB","\uFEED","\uFEF3","\uFE87","\uFE83","\uFE81","\uFE93","\uFEEF","\uFBFE","\uFE8B","\uFE85","\uFE70","\uFE72","\uFE74","\uFE76","\uFE78","\uFE7A","\uFE7C","\uFE7E","\uFE80","\uFE8B","\uFE85"],Jt=["\u0621","\u0622","\u0623","\u0624","\u0625","\u0627","\u0629","\u062F","\u0630","\u0631","\u0632","\u0648","\u0649"],bi=["\u064B","\u064B","\u064C","\u061F","\u064D","\u061F","\u064E","\u064E","\u064F","\u064F","\u0650","\u0650","\u0651","\u0651","\u0652","\u0652","\u0621","\u0622","\u0622","\u0623","\u0623","\u0624","\u0624","\u0625","\u0625","\u0626","\u0626","\u0626","\u0626","\u0627","\u0627","\u0628","\u0628","\u0628","\u0628","\u0629","\u0629","\u062A","\u062A","\u062A","\u062A","\u062B","\u062B","\u062B","\u062B","\u062C","\u062C","\u062C","\u062C","\u062D","\u062D","\u062D","\u062D","\u062E","\u062E","\u062E","\u062E","\u062F","\u062F","\u0630","\u0630","\u0631","\u0631","\u0632","\u0632","\u0633","\u0633","\u0633","\u0633","\u0634","\u0634","\u0634","\u0634","\u0635","\u0635","\u0635","\u0635","\u0636","\u0636","\u0636","\u0636","\u0637","\u0637","\u0637","\u0637","\u0638","\u0638","\u0638","\u0638","\u0639","\u0639","\u0639","\u0639","\u063A","\u063A","\u063A","\u063A","\u0641","\u0641","\u0641","\u0641","\u0642","\u0642","\u0642","\u0642","\u0643","\u0643","\u0643","\u0643","\u0644","\u0644","\u0644","\u0644","\u0645","\u0645","\u0645","\u0645","\u0646","\u0646","\u0646","\u0646","\u0647","\u0647","\u0647","\u0647","\u0648","\u0648","\u0649","\u0649","\u064A","\u064A","\u064A","\u064A","\uFEF5","\uFEF6","\uFEF7","\uFEF8","\uFEF9","\uFEFA","\uFEFB","\uFEFC","\u061F","\u061F","\u061F"],Kt=["\u0621","\u0641"],Ri=["\u063A","\u064A"],Bi=[[0,3,0,1,0,0,0],[0,3,0,1,2,2,0],[0,3,0,17,2,0,1],[0,3,5,5,4,1,0],[0,3,21,21,4,0,1],[0,3,5,5,4,2,0]],Ui=[[2,0,1,1,0,1,0],[2,0,1,1,0,2,0],[2,0,2,1,3,2,0],[2,0,2,33,3,1,1]],s=0,x=1,_=2,S=3,t=4,it=5,Pt=6,i=7,D=8,z=9,K=10,w=11,r=12,Fi=13,Si=14,Ni=15,Vi=16,Mi=17,d=18,$i=["UBAT_L","UBAT_R","UBAT_EN","UBAT_AN","UBAT_ON","UBAT_B","UBAT_S","UBAT_AL","UBAT_WS","UBAT_CS","UBAT_ES","UBAT_ET","UBAT_NSM","UBAT_LRE","UBAT_RLE","UBAT_PDF","UBAT_LRO","UBAT_RLO","UBAT_BN"],tt=100,Ei=[tt+0,s,s,s,s,tt+1,tt+2,tt+3,x,s,s,s,s,s,s,s,s,s,s,s,s,s,s,s,s,s,s,s,s,s,s,s,tt+4,t,t,t,s,t,s,t,s,t,t,t,s,s,t,t,s,s,s,s,s,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,s,s,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,s,s,s,s,s,s,s,s,s,s,s,s,s,s,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,s,s,t,t,s,s,t,t,s,s,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,s,s,s,tt+5,i,i,tt+6,tt+7],Pi=[[d,d,d,d,d,d,d,d,d,Pt,it,Pt,D,it,d,d,d,d,d,d,d,d,d,d,d,d,d,d,it,it,it,Pt,D,t,t,w,w,w,t,t,t,t,t,K,z,K,z,z,_,_,_,_,_,_,_,_,_,_,z,t,t,t,t,t,t,s,s,s,s,s,s,s,s,s,s,s,s,s,s,s,s,s,s,s,s,s,s,s,s,s,s,t,t,t,t,t,t,s,s,s,s,s,s,s,s,s,s,s,s,s,s,s,s,s,s,s,s,s,s,s,s,s,s,t,t,t,t,d,d,d,d,d,d,it,d,d,d,d,d,d,d,d,d,d,d,d,d,d,d,d,d,d,d,d,d,d,d,d,d,d,z,t,w,w,w,w,t,t,t,t,s,t,t,d,t,t,w,w,_,_,t,s,t,t,t,_,s,t,t,t,t,t,s,s,s,s,s,s,s,s,s,s,s,s,s,s,s,s,s,s,s,s,s,s,s,t,s,s,s,s,s,s,s,s,s,s,s,s,s,s,s,s,s,s,s,s,s,s,s,s,s,s,s,s,s,s,s,t,s,s,s,s,s,s,s,s],[s,s,s,s,s,s,s,s,s,s,s,s,s,s,s,s,s,s,s,s,s,s,s,s,s,s,s,s,s,s,s,s,s,s,s,s,s,s,s,s,t,t,t,t,t,t,t,t,t,s,s,s,s,s,s,s,s,s,s,s,s,s,s,s,s,s,s,s,s,s,s,s,s,s,s,s,s,s,s,s,s,s,s,s,s,s,s,t,t,s,s,s,s,s,s,s,t,s,s,s,s,s,s,s,s,s,s,s,s,s,s,s,s,s,s,s,s,s,s,s,s,s,s,s,s,s,s,s,s,s,s,s,s,s,s,s,t,s,t,t,t,t,t,t,t,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,x,r,x,r,r,x,r,r,x,r,t,t,t,t,t,t,t,t,x,x,x,x,x,x,x,x,x,x,x,x,x,x,x,x,x,x,x,x,x,x,x,x,x,x,x,t,t,t,t,t,x,x,x,x,x,t,t,t,t,t,t,t,t,t,t,t],[S,S,S,S,t,t,t,t,i,w,w,i,z,i,t,t,r,r,r,r,r,r,r,r,r,r,r,i,t,t,i,i,i,i,i,i,i,i,i,i,i,i,i,i,i,i,i,i,i,i,i,i,i,i,i,i,i,i,i,i,i,i,i,i,i,i,i,i,i,i,i,i,i,i,i,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,S,S,S,S,S,S,S,S,S,S,w,S,S,i,i,i,r,i,i,i,i,i,i,i,i,i,i,i,i,i,i,i,i,i,i,i,i,i,i,i,i,i,i,i,i,i,i,i,i,i,i,i,i,i,i,i,i,i,i,i,i,i,i,i,i,i,i,i,i,i,i,i,i,i,i,i,i,i,i,i,i,i,i,i,i,i,i,i,i,i,i,i,i,i,i,i,i,i,i,i,i,i,i,i,i,i,i,i,i,i,i,i,i,i,i,i,i,i,r,r,r,r,r,r,r,S,t,r,r,r,r,r,r,i,i,r,r,t,r,r,r,r,i,i,_,_,_,_,_,_,_,_,_,_,i,i,i,i,i,i],[i,i,i,i,i,i,i,i,i,i,i,i,i,i,t,i,i,r,i,i,i,i,i,i,i,i,i,i,i,i,i,i,i,i,i,i,i,i,i,i,i,i,i,i,i,i,i,i,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,t,t,i,i,i,i,i,i,i,i,i,i,i,i,i,i,i,i,i,i,i,i,i,i,i,i,i,i,i,i,i,i,i,i,i,i,i,i,i,i,i,i,i,i,i,i,i,i,i,i,i,i,i,i,i,i,i,i,i,i,i,i,i,i,i,i,i,i,i,i,i,i,i,i,i,i,i,i,i,i,i,i,i,i,i,i,i,i,i,i,i,r,r,r,r,r,r,r,r,r,r,r,i,t,t,t,t,t,t,t,t,t,t,t,t,t,t,x,x,x,x,x,x,x,x,x,x,x,x,x,x,x,x,x,x,x,x,x,x,x,x,x,x,x,x,x,x,x,x,x,x,x,x,x,x,x,x,x,x,x,r,r,r,r,r,r,r,r,r,x,x,t,t,t,t,x,t,t,t,t,t],[D,D,D,D,D,D,D,D,D,D,D,d,d,d,s,x,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,D,it,Fi,Si,Ni,Vi,Mi,z,w,w,w,w,w,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,z,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,D,d,d,d,d,d,t,t,t,t,t,d,d,d,d,d,d,_,s,t,t,_,_,_,_,_,_,K,K,t,t,t,s,_,_,_,_,_,_,_,_,_,_,K,K,t,t,t,t,s,s,s,s,s,s,s,s,s,s,s,s,s,t,t,t,w,w,w,w,w,w,w,w,w,w,w,w,w,w,w,w,w,w,w,w,w,w,w,w,w,w,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t],[s,s,s,s,s,s,s,t,t,t,t,t,t,t,t,t,t,t,t,s,s,s,s,s,t,t,t,t,t,x,r,x,x,x,x,x,x,x,x,x,x,K,x,x,x,x,x,x,x,x,x,x,x,x,x,t,x,x,x,x,x,t,x,t,x,x,t,x,x,t,x,x,x,x,x,x,x,x,x,x,i,i,i,i,i,i,i,i,i,i,i,i,i,i,i,i,i,i,i,i,i,i,i,i,i,i,i,i,i,i,i,i,i,i,i,i,i,i,i,i,i,i,i,i,i,i,i,i,i,i,i,i,i,i,i,i,i,i,i,i,i,i,i,i,i,i,i,i,i,i,i,i,i,i,i,i,i,i,i,i,i,i,i,i,i,i,i,i,i,i,i,i,i,i,i,i,i,i,i,i,i,i,i,i,i,i,i,i,i,i,i,i,i,i,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,i,i,i,i,i,i,i,i,i,i,i,i,i,i,i,i,i,i,i,i,i,i,i,i,i,i,i,i,i,i,i,i,i,i,i,i,i,i,i,i,i,i,i,i,i],[r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,r,r,r,r,r,r,r,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,z,t,z,t,t,z,t,t,t,t,t,t,t,t,t,w,t,t,K,K,t,t,t,t,t,w,w,t,t,t,t,t,i,i,i,i,i,t,i,i,i,i,i,i,i,i,i,i,i,i,i,i,i,i,i,i,i,i,i,i,i,i,i,i,i,i,i,i,i,i,i,i,i,i,i,i,i,i,i,i,i,i,i,i,i,i,i,i,i,i,i,i,i,i,i,i,i,i,i,i,i,i,i,i,i,i,i,i,i,i,i,i,i,i,i,i,i,i,i,i,i,i,i,i,i,i,i,i,i,i,i,i,i,i,i,i,i,i,i,i,i,i,i,i,i,i,i,i,i,i,i,i,i,i,i,i,i,i,i,i,i,i,i,i,i,i,i,i,i,i,i,i,i,t,t,d],[t,t,t,w,w,w,t,t,t,t,t,K,z,K,z,z,_,_,_,_,_,_,_,_,_,_,z,t,t,t,t,t,t,s,s,s,s,s,s,s,s,s,s,s,s,s,s,s,s,s,s,s,s,s,s,s,s,s,s,t,t,t,t,t,t,s,s,s,s,s,s,s,s,s,s,s,s,s,s,s,s,s,s,s,s,s,s,s,s,s,s,t,t,t,t,t,t,t,t,t,t,t,s,s,s,s,s,s,s,s,s,s,s,s,s,s,s,s,s,s,s,s,s,s,s,s,s,s,s,s,s,s,s,s,s,s,s,s,s,s,s,s,s,s,s,s,s,s,s,s,s,s,s,s,s,s,s,s,s,s,s,s,s,s,s,s,s,s,s,s,s,s,s,s,s,s,s,s,s,s,s,s,s,s,s,s,s,s,s,s,s,t,t,t,s,s,s,s,s,s,t,t,s,s,s,s,s,s,t,t,s,s,s,s,s,s,t,t,s,s,s,t,t,t,w,w,t,t,t,w,w,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t]];class fs{constructor(){this.inputFormat="ILYNN",this.outputFormat="VLNNN",this.sourceToTarget=[],this.targetToSource=[],this.levels=[]}bidiTransform(e,n,h){if(this.sourceToTarget=[],this.targetToSource=[],!e)return"";if(Qi(this.sourceToTarget,this.targetToSource,e.length),!this.checkParameters(n,h))return e;n=this.inputFormat,h=this.outputFormat;let l=e;const o=is,u=ii(n.charAt(1)),f=ii(h.charAt(1)),c=(n.charAt(0)==="I"?"L":n.charAt(0))+u,g=(h.charAt(0)==="I"?"L":h.charAt(0))+f,L=n.charAt(2)+h.charAt(2);o.defInFormat=c,o.defOutFormat=g,o.defSwap=L;const B=vt(e,c,g,L,o);let v=!1;return h.charAt(1)==="R"?v=!0:h.charAt(1)!=="C"&&h.charAt(1)!=="D"||(v=this.checkContextual(B)==="rtl"),this.sourceToTarget=X,this.targetToSource=ts(this.sourceToTarget),It=this.targetToSource,l=n.charAt(3)===h.charAt(3)?B:h.charAt(3)==="S"?Ci(v,B,!0):ji(B,v,!0),this.sourceToTarget=X,this.targetToSource=It,this.levels=Dt,l}_inputFormatSetter(e){if(!si.test(e))throw new Error("dojox/string/BidiEngine: the bidi layout string is wrong!");this.inputFormat=e}_outputFormatSetter(e){if(!si.test(e))throw new Error("dojox/string/BidiEngine: the bidi layout string is wrong!");this.outputFormat=e}checkParameters(e,n){return e?this._inputFormatSetter(e):e=this.inputFormat,n?this._outputFormatSetter(n):n=this.outputFormat,e!==n}checkContextual(e){let n=Ct(e);if(n!=="ltr"&&n!=="rtl"){try{n=document.dir.toLowerCase()}catch{}n!=="ltr"&&n!=="rtl"&&(n="ltr")}return n}hasBidiChar(e){return ns.test(e)}}function vt(a,e,n,h,l){const o=ki(a,{inFormat:e,outFormat:n,swap:h},l);if(o.inFormat===o.outFormat)return a;e=o.inFormat,n=o.outFormat,h=o.swap;const u=e.substring(0,1),f=e.substring(1,4),c=n.substring(0,1),g=n.substring(1,4);if(l.inFormat=e,l.outFormat=n,l.swap=h,u==="L"&&n==="VLTR"){if(f==="LTR")return l.dir=dt,xt(a,l);if(f==="RTL")return l.dir=At,xt(a,l)}if(u==="V"&&c==="V")return l.dir=f==="RTL"?At:dt,Yt(a,l);if(u==="L"&&n==="VRTL")return f==="LTR"?(l.dir=dt,a=xt(a,l)):(l.dir=At,a=xt(a,l)),Yt(a);if(e==="VLTR"&&n==="LLTR")return l.dir=dt,xt(a,l);if(u==="V"&&c==="L"&&f!==g)return a=Yt(a),f==="RTL"?vt(a,"LLTR","VLTR",h,l):vt(a,"LRTL","VRTL",h,l);if(e==="VRTL"&&n==="LRTL")return vt(a,"LRTL","VRTL",h,l);if(u==="L"&&c==="L"){const L=l.swap;return l.swap=L.substr(0,1)+"N",f==="RTL"?(l.dir=At,a=xt(a,l),l.swap="N"+L.substr(1,2),l.dir=dt,a=xt(a,l)):(l.dir=dt,a=xt(a,l),l.swap="N"+L.substr(1,2),a=vt(a,"VLTR","LRTL",l.swap,l)),a}return a}function ki(a,e,n){if(e.inFormat===void 0&&(e.inFormat=n.defInFormat),e.outFormat===void 0&&(e.outFormat=n.defOutFormat),e.swap===void 0&&(e.swap=n.defSwap),e.inFormat===e.outFormat)return e;const h=e.inFormat.substring(0,1),l=e.outFormat.substring(0,1);let o,u=e.inFormat.substring(1,4),f=e.outFormat.substring(1,4);return u.charAt(0)==="C"&&(o=Ct(a),u=o==="ltr"||o==="rtl"?o.toUpperCase():e.inFormat.charAt(2)==="L"?"LTR":"RTL",e.inFormat=h+u),f.charAt(0)==="C"&&(o=Ct(a),o==="rtl"?f="RTL":o==="ltr"?(o=Di(a),f=o.toUpperCase()):f=e.outFormat.charAt(2)==="L"?"LTR":"RTL",e.outFormat=l+f),e}function Ci(a,e,n){if(e.length===0)return"";a===void 0&&(a=!0),n===void 0&&(n=!0);const h=(e=String(e)).split("");let l=0,o=1,u=h.length;a||(l=h.length-1,o=-1,u=1);const f=Ii(h,l,o,u,n);let c="";for(let g=0;g<h.length;g++)n&&Wi(f,f.length,g)>-1?(ai(It,g,!a,-1),X.splice(g,1)):c+=h[g];return c}function Ii(a,e,n,h,l){let o=0;const u=[];let f=0;for(let c=e;c*n<h;c+=n)if(ri(a[c])||Lt(a[c])){if(a[c]==="\u0644"&&Xi(a,c+n,n,h)){a[c]=Ki(a[c+n],o===0?Ti:_i),c+=n,Ji(a,c,n,h),l&&(u[f]=c,f++),o=0;continue}const g=a[c];o===1?a[c]=Qt(a,c+n,n,h)?Zi(a[c]):Gt(a[c],vi):Qt(a,c+n,n,h)===!0?a[c]=Gt(a[c],Li):a[c]=Gt(a[c],wi),Lt(g)||(o=1),Hi(g)===!0&&(o=0)}else o=0;return u}function Ct(a){const e=/[A-Za-z\u05d0-\u065f\u066a-\u06ef\u06fa-\u07ff\ufb1d-\ufdff\ufe70-\ufefc]/.exec(a);return e?e[0]<="z"?"ltr":"rtl":""}function Di(a){const e=a.split("");return e.reverse(),Ct(e.join(""))}function ji(a,e,n){if(a.length===0)return"";n===void 0&&(n=!0),e===void 0&&(e=!0);let h="";const l=(a=String(a)).split("");for(let o=0;o<a.length;o++){let u=!1;if(l[o]>="\uFE70"&&l[o]<"\uFEFF"){const f=a.charCodeAt(o);l[o]>="\uFEF5"&&l[o]<="\uFEFC"?(e?(o>0&&n&&l[o-1]===" "?h=h.substring(0,h.length-1)+"\u0644":(h+="\u0644",u=!0),h+=Tt[(f-65269)/2]):(h+=Tt[(f-65269)/2],h+="\u0644",o+1<a.length&&n&&l[o+1]===" "?o++:u=!0),u&&(ai(It,o,!0,1),X.splice(o,0,X[o]))):h+=bi[f-65136]}else h+=l[o]}return h}function xt(a,e){const n=a.split(""),h=[];return hi(n,h,e),Oi(n,h,e),ti(2,n,h,e),ti(1,n,h,e),Dt=h,n.join("")}function hi(a,e,n){const h=a.length,l=n.dir?Ui:Bi;let o=0,u=-1;const f=[],c=[];n.hiLevel=n.dir,n.lastArabic=!1,n.hasUbatAl=!1,n.hasUbatB=!1,n.hasUbatS=!1;for(let g=0;g<h;g++)f[g]=zi(a[g]);for(let g=0;g<h;g++){const L=o,B=Yi(a,f,c,g,n);c[g]=B,o=l[L][B];const v=240&o;o&=15;const A=l[o][ss];if(e[g]=A,v>0)if(v===16){for(let p=u;p<g;p++)e[p]=1;u=-1}else u=-1;if(l[o][es])u===-1&&(u=g);else if(u>-1){for(let p=u;p<g;p++)e[p]=A;u=-1}f[g]===it&&(e[g]=0),n.hiLevel|=A}n.hasUbatS&&qi(f,e,h,n)}function qi(a,e,n,h){for(let l=0;l<n;l++)if(a[l]===Pt){e[l]=h.dir;for(let o=l-1;o>=0&&a[o]===D;o--)e[o]=h.dir}}function Oi(a,e,n){if(n.hiLevel!==0&&n.swap.substr(0,1)!==n.swap.substr(1,2))for(let h=0;h<a.length;h++)e[h]===1&&(a[h]=Gi(a[h]))}function zi(a){const e=a.charCodeAt(0),n=Ei[e>>8];return n<tt?n:Pi[n-tt][255&e]}function Yt(a,e){const n=a.split("");if(e){const h=[];hi(n,h,e),Dt=h}return n.reverse(),X.reverse(),n.join("")}function Wi(a,e,n){for(let h=0;h<e;h++)if(a[h]===n)return h;return-1}function ri(a){for(let e=0;e<Kt.length;e++)if(a>=Kt[e]&&a<=Ri[e])return!0;return!1}function Qt(a,e,n,h){for(;e*n<h&&Lt(a[e]);)e+=n;return!!(e*n<h&&ri(a[e]))}function Xi(a,e,n,h){for(;e*n<h&&Lt(a[e]);)e+=n;let l=" ";if(!(e*n<h))return!1;l=a[e];for(let o=0;o<Tt.length;o++)if(Tt[o]===l)return!0;return!1}function ti(a,e,n,h){if(h.hiLevel<a)return;if(a===1&&h.dir===At&&!h.hasUbatB)return e.reverse(),void X.reverse();const l=e.length;let o,u,f,c,g,L=0;for(;L<l;){if(n[L]>=a){for(o=L+1;o<l&&n[o]>=a;)o++;for(u=L,f=o-1;u<f;u++,f--)c=e[u],e[u]=e[f],e[f]=c,g=X[u],X[u]=X[f],X[f]=g;L=o}L++}}function Yi(a,e,n,h,l){const o=e[h];return{UBAT_L:()=>(l.lastArabic=!1,s),UBAT_R:()=>(l.lastArabic=!1,x),UBAT_ON:()=>t,UBAT_AN:()=>S,UBAT_EN:()=>l.lastArabic?S:_,UBAT_AL:()=>(l.lastArabic=!0,l.hasUbatAl=!0,x),UBAT_WS:()=>t,UBAT_CS:()=>{let u,f;return h<1||h+1>=e.length||(u=n[h-1])!==_&&u!==S||(f=e[h+1])!==_&&f!==S?t:(l.lastArabic&&(f=S),f===u?f:t)},UBAT_ES:()=>(h>0?n[h-1]:it)===_&&h+1<e.length&&e[h+1]===_?_:t,UBAT_ET:()=>{if(h>0&&n[h-1]===_)return _;if(l.lastArabic)return t;let u=h+1;const f=e.length;for(;u<f&&e[u]===w;)u++;return u<f&&e[u]===_?_:t},UBAT_NSM:()=>{if(l.inFormat==="VLTR"){const u=e.length;let f=h+1;for(;f<u&&e[f]===r;)f++;if(f<u){const c=a[h].charCodeAt[0],g=c>=1425&&c<=2303||c===64286,L=e[f];if(g&&(L===x||L===i))return x}}return h<1||e[h-1]===it?t:n[h-1]},UBAT_B:()=>(l.lastArabic=!0,l.hasUbatB=!0,l.dir),UBAT_S:()=>(l.hasUbatS=!0,t),UBAT_LRE:()=>(l.lastArabic=!1,t),UBAT_RLE:()=>(l.lastArabic=!1,t),UBAT_LRO:()=>(l.lastArabic=!1,t),UBAT_RLO:()=>(l.lastArabic=!1,t),UBAT_PDF:()=>(l.lastArabic=!1,t),UBAT_BN:()=>t}[$i[o]]()}function Gi(a){let e,n=0,h=Mt.length-1;for(;n<=h;)if(e=Math.floor((n+h)/2),a<Mt[e][0])h=e-1;else{if(!(a>Mt[e][0]))return Mt[e][1];n=e+1}return a}function Hi(a){for(let e=0;e<Jt.length;e++)if(Jt[e]===a)return!0;return!1}function Zi(a){for(let e=0;e<kt.length;e++)if(a===kt[e])return Ai[e];return a}function Gt(a,e){for(let n=0;n<kt.length;n++)if(a===kt[n])return e[n];return a}function Lt(a){return a>="\u064B"&&a<="\u0655"}function ii(a){return a==="L"?"LTR":a==="R"?"RTL":a==="C"?"CLR":a==="D"?"CRL":""}function Ji(a,e,n,h){for(;e*n<h&&Lt(a[e]);)e+=n;return e*n<h&&(a[e]=" ",!0)}function Ki(a,e){for(let n=0;n<Tt.length;n++)if(a===Tt[n])return e[n];return a}function Qi(a,e,n){X=[],Dt=[];for(let h=0;h<n;h++)a[h]=h,e[h]=h,X[h]=h}function ts(a){const e=new Array(a.length);for(let n=0;n<a.length;n++)e[a[n]]=n;return e}function ai(a,e,n,h){for(let l=0;l<a.length;l++)(a[l]>e||!n&&a[l]===e)&&(a[l]+=h)}let X=[],It=[],Dt=[];const is={dir:0,defInFormat:"LLTR",defoutFormat:"VLTR",defSwap:"YN",inFormat:"LLTR",outFormat:"VLTR",swap:"YN",hiLevel:0,lastArabic:!1,hasUbatAl:!1,hasBlockSep:!1,hasSegSep:!1,defOutFormat:""},ss=5,es=6,dt=0,At=1,si=/^[(I|V)][(L|R|C|D)][(Y|N)][(S|N)][N]$/,ns=/[\u0591-\u06ff\ufb1d-\ufefc]/,hs=Math.PI,rs=128/hs,as=256/360;function li(a,e){return(a%=e)>=0?a:a+e}function ms(a){return li(a*rs,256)}function gs(a){return li(a*as,256)}function $t(a,e,n){return a>=e&&a<=n||a>=n&&a<=e}class Et{constructor(e,n,h){this.ratio=e,this.x=n,this.y=h}}class ps{constructor(e,n,h,l=8,o=8){this.lines=[],this.starts=[],this.validateTessellation=!0,this.pixelRatio=l,this.pixelMargin=o,this.tileSize=fi*l,this.dz=e,this.yPos=n,this.xPos=h}setPixelMargin(e){e!==this.pixelMargin&&(this.pixelMargin=e,this.setExtent(this._extent))}setExtent(e){this._extent=e,this.finalRatio=this.tileSize/e*(1<<this.dz);let n=this.pixelRatio*this.pixelMargin;n/=this.finalRatio;const h=e>>this.dz;n>h&&(n=h),this.margin=n,this.xmin=h*this.xPos-n,this.ymin=h*this.yPos-n,this.xmax=this.xmin+h+2*n,this.ymax=this.ymin+h+2*n}reset(e){this.type=e,this.lines=[],this.starts=[],this.line=null,this.start=0}moveTo(e,n){this._pushLine(),this._prevIsIn=this._isIn(e,n),this._moveTo(e,n,this._prevIsIn),this._prevPt=new j(e,n),this._firstPt=new j(e,n),this._dist=0}lineTo(e,n){const h=this._isIn(e,n),l=new j(e,n),o=j.distance(this._prevPt,l);let u,f,c,g,L,B,v,A;if(h)this._prevIsIn?this._lineTo(e,n,!0):(u=this._prevPt,f=l,c=this._intersect(f,u),this.start=this._dist+o*(1-this._r),this._lineTo(c.x,c.y,!0),this._lineTo(f.x,f.y,!0));else if(this._prevIsIn)f=this._prevPt,u=l,c=this._intersect(f,u),this._lineTo(c.x,c.y,!0),this._lineTo(u.x,u.y,!1);else{const p=this._prevPt,T=l;if(p.x<=this.xmin&&T.x<=this.xmin||p.x>=this.xmax&&T.x>=this.xmax||p.y<=this.ymin&&T.y<=this.ymin||p.y>=this.ymax&&T.y>=this.ymax)this._lineTo(T.x,T.y,!1);else{const b=[];if((p.x<this.xmin&&T.x>this.xmin||p.x>this.xmin&&T.x<this.xmin)&&(g=(this.xmin-p.x)/(T.x-p.x),A=p.y+g*(T.y-p.y),A<=this.ymin?B=!1:A>=this.ymax?B=!0:b.push(new Et(g,this.xmin,A))),(p.x<this.xmax&&T.x>this.xmax||p.x>this.xmax&&T.x<this.xmax)&&(g=(this.xmax-p.x)/(T.x-p.x),A=p.y+g*(T.y-p.y),A<=this.ymin?B=!1:A>=this.ymax?B=!0:b.push(new Et(g,this.xmax,A))),(p.y<this.ymin&&T.y>this.ymin||p.y>this.ymin&&T.y<this.ymin)&&(g=(this.ymin-p.y)/(T.y-p.y),v=p.x+g*(T.x-p.x),v<=this.xmin?L=!1:v>=this.xmax?L=!0:b.push(new Et(g,v,this.ymin))),(p.y<this.ymax&&T.y>this.ymax||p.y>this.ymax&&T.y<this.ymax)&&(g=(this.ymax-p.y)/(T.y-p.y),v=p.x+g*(T.x-p.x),v<=this.xmin?L=!1:v>=this.xmax?L=!0:b.push(new Et(g,v,this.ymax))),b.length===0)L?B?this._lineTo(this.xmax,this.ymax,!0):this._lineTo(this.xmax,this.ymin,!0):B?this._lineTo(this.xmin,this.ymax,!0):this._lineTo(this.xmin,this.ymin,!0);else if(b.length>1&&b[0].ratio>b[1].ratio)this.start=this._dist+o*b[1].ratio,this._lineTo(b[1].x,b[1].y,!0),this._lineTo(b[0].x,b[0].y,!0);else{this.start=this._dist+o*b[0].ratio;for(let R=0;R<b.length;R++)this._lineTo(b[R].x,b[R].y,!0)}this._lineTo(T.x,T.y,!1)}}this._dist+=o,this._prevIsIn=h,this._prevPt=l}close(){if(this.line.length>2){const e=this._firstPt,n=this._prevPt;e.x===n.x&&e.y===n.y||this.lineTo(e.x,e.y);const h=this.line;let l=h.length;for(;l>=4&&(h[0].x===h[1].x&&h[0].x===h[l-2].x||h[0].y===h[1].y&&h[0].y===h[l-2].y);)h.pop(),h[0].x=h[l-2].x,h[0].y=h[l-2].y,--l}}result(e=!0){return this._pushLine(),this.lines.length===0?null:(this.type===3&&e&&rt.simplify(this.tileSize,this.margin*this.finalRatio,this.lines),this.lines)}resultWithStarts(){if(this.type!==2)throw new Error("Only valid for lines");this._pushLine();const e=this.lines,n=e.length;if(n===0)return null;const h=[];for(let l=0;l<n;l++)h.push({line:e[l],start:this.starts[l]||0});return h}_isIn(e,n){return e>=this.xmin&&e<=this.xmax&&n>=this.ymin&&n<=this.ymax}_intersect(e,n){let h,l,o;if(n.x>=this.xmin&&n.x<=this.xmax)l=n.y<=this.ymin?this.ymin:this.ymax,o=(l-e.y)/(n.y-e.y),h=e.x+o*(n.x-e.x);else if(n.y>=this.ymin&&n.y<=this.ymax)h=n.x<=this.xmin?this.xmin:this.xmax,o=(h-e.x)/(n.x-e.x),l=e.y+o*(n.y-e.y);else{l=n.y<=this.ymin?this.ymin:this.ymax,h=n.x<=this.xmin?this.xmin:this.xmax;const u=(h-e.x)/(n.x-e.x),f=(l-e.y)/(n.y-e.y);u<f?(o=u,l=e.y+u*(n.y-e.y)):(o=f,h=e.x+f*(n.x-e.x))}return this._r=o,new j(h,l)}_pushLine(){this.line&&(this.type===1?this.line.length>0&&(this.lines.push(this.line),this.starts.push(this.start)):this.type===2?this.line.length>1&&(this.lines.push(this.line),this.starts.push(this.start)):this.type===3&&this.line.length>3&&(this.lines.push(this.line),this.starts.push(this.start))),this.line=[],this.start=0}_moveTo(e,n,h){this.type!==3?h&&(e=Math.round((e-(this.xmin+this.margin))*this.finalRatio),n=Math.round((n-(this.ymin+this.margin))*this.finalRatio),this.line.push(new j(e,n))):(h||(e<this.xmin&&(e=this.xmin),e>this.xmax&&(e=this.xmax),n<this.ymin&&(n=this.ymin),n>this.ymax&&(n=this.ymax)),e=Math.round((e-(this.xmin+this.margin))*this.finalRatio),n=Math.round((n-(this.ymin+this.margin))*this.finalRatio),this.line.push(new j(e,n)),this._is_h=!1,this._is_v=!1)}_lineTo(e,n,h){let l,o;if(this.type!==3)if(h){if(e=Math.round((e-(this.xmin+this.margin))*this.finalRatio),n=Math.round((n-(this.ymin+this.margin))*this.finalRatio),this.line.length>0&&(l=this.line[this.line.length-1],l.equals(e,n)))return;this.line.push(new j(e,n))}else this.line&&this.line.length>0&&this._pushLine();else if(h||(e<this.xmin&&(e=this.xmin),e>this.xmax&&(e=this.xmax),n<this.ymin&&(n=this.ymin),n>this.ymax&&(n=this.ymax)),e=Math.round((e-(this.xmin+this.margin))*this.finalRatio),n=Math.round((n-(this.ymin+this.margin))*this.finalRatio),this.line&&this.line.length>0){l=this.line[this.line.length-1];const u=l.x===e,f=l.y===n;if(u&&f)return;this._is_h&&u||this._is_v&&f?(l.x=e,l.y=n,o=this.line[this.line.length-2],o.x===e&&o.y===n?(this.line.pop(),this.line.length<=1?(this._is_h=!1,this._is_v=!1):(o=this.line[this.line.length-2],this._is_h=o.x===e,this._is_v=o.y===n)):(this._is_h=o.x===e,this._is_v=o.y===n)):(this.line.push(new j(e,n)),this._is_h=u,this._is_v=f)}else this.line.push(new j(e,n))}}class ds{setExtent(e){this._ratio=e===4096?1:4096/e}get validateTessellation(){return this._ratio<1}reset(e){this.lines=[],this.line=null}moveTo(e,n){this.line&&this.lines.push(this.line),this.line=[];const h=this._ratio;this.line.push(new j(e*h,n*h))}lineTo(e,n){const h=this._ratio;this.line.push(new j(e*h,n*h))}close(){const e=this.line;e&&!e[0].isEqual(e[e.length-1])&&e.push(e[0])}result(){return this.line&&this.lines.push(this.line),this.lines.length===0?null:this.lines}}class rt{static simplify(e,n,h){if(!h)return;const l=-n,o=e+n,u=-n,f=e+n,c=[],g=[],L=h.length;for(let v=0;v<L;++v){const A=h[v];if(!A||A.length<2)continue;let p,T=A[0];const b=A.length;for(let R=1;R<b;++R)p=A[R],T.x===p.x&&(T.x<=l&&(T.y>p.y?(c.push(v),c.push(R),c.push(0),c.push(-1)):(g.push(v),g.push(R),g.push(0),g.push(-1))),T.x>=o&&(T.y<p.y?(c.push(v),c.push(R),c.push(1),c.push(-1)):(g.push(v),g.push(R),g.push(1),g.push(-1)))),T.y===p.y&&(T.y<=u&&(T.x<p.x?(c.push(v),c.push(R),c.push(2),c.push(-1)):(g.push(v),g.push(R),g.push(2),g.push(-1))),T.y>=f&&(T.x>p.x?(c.push(v),c.push(R),c.push(3),c.push(-1)):(g.push(v),g.push(R),g.push(3),g.push(-1)))),T=p}if(c.length===0||g.length===0)return;rt.fillParent(h,g,c),rt.fillParent(h,c,g);const B=[];rt.calcDeltas(B,g,c),rt.calcDeltas(B,c,g),rt.addDeltas(B,h)}static fillParent(e,n,h){const l=h.length,o=n.length;for(let u=0;u<o;u+=4){const f=n[u],c=n[u+1],g=n[u+2],L=e[f][c-1],B=e[f][c];let v=8092,A=-1;for(let p=0;p<l;p+=4){if(h[p+2]!==g)continue;const T=h[p],b=h[p+1],R=e[T][b-1],m=e[T][b];switch(g){case 0:case 1:if($t(L.y,R.y,m.y)&&$t(B.y,R.y,m.y)){const y=Math.abs(m.y-R.y);y<v&&(v=y,A=p)}break;case 2:case 3:if($t(L.x,R.x,m.x)&&$t(B.x,R.x,m.x)){const y=Math.abs(m.x-R.x);y<v&&(v=y,A=p)}}}n[u+3]=A}}static calcDeltas(e,n,h){const l=n.length;for(let o=0;o<l;o+=4){const u=[],f=rt.calcDelta(o,n,h,u);e.push(n[o]),e.push(n[o+1]),e.push(n[o+2]),e.push(f)}}static calcDelta(e,n,h,l){const o=n[e+3];if(o===-1)return 0;const u=l.length;return u>1&&l[u-2]===o?0:(l.push(o),rt.calcDelta(o,h,n,l)+1)}static addDeltas(e,n){const h=e.length;let l=0;for(let o=0;o<h;o+=4){const u=e[o+3];u>l&&(l=u)}for(let o=0;o<h;o+=4){const u=n[e[o]],f=e[o+1],c=l-e[o+3];switch(e[o+2]){case 0:u[f-1].x-=c,u[f].x-=c,f===1&&(u[u.length-1].x-=c),f===u.length-1&&(u[0].x-=c);break;case 1:u[f-1].x+=c,u[f].x+=c,f===1&&(u[u.length-1].x+=c),f===u.length-1&&(u[0].x+=c);break;case 2:u[f-1].y-=c,u[f].y-=c,f===1&&(u[u.length-1].y-=c),f===u.length-1&&(u[0].y-=c);break;case 3:u[f-1].y+=c,u[f].y+=c,f===1&&(u[u.length-1].y+=c),f===u.length-1&&(u[0].y+=c)}}}}export{fs as C,gs as M,j as a,cs as b,us as c,ds as e,ms as h,ps as n,ys as r,xs as t};
